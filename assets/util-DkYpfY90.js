import{r as M,j as D,R as ve}from"./index-NXYFgAjv.js";import{p as Oe,u as Zr}from"./viewport-BolDZsoB.js";import{u as ir,m as et,i as rt}from"./use-ref-value-Mo2_v78l.js";import{e as rr,u as ur,f as Ze,s as qr,O as tr,U as er,j as he}from"./owner-BSI_Vh2r.js";import{A as tt}from"./Shiki-DqAvoUyD.js";import{c as ie,a as Ee,M as nt,b as at}from"./StyledButton-DkLDqqqY.js";import{d as ot}from"./index-CGTxCqfm.js";import{u as lr,a as st}from"./use-motion-template-CzIari3g.js";import{m as it}from"./proxy-DqEdd0_T.js";import{u as ut}from"./use-event-callback-Bd5z-v00.js";import"./provider-CQaN5NIX.js";let lt=Object.freeze([]),ct=e=>{let t=M.useRef(!1);!t.current&&(t.current=!0,e?.())},Fr=()=>{var e;let t=M.createContext(null),a=rr(null),r=M.memo(n=>{var o;let{data:l,children:c}=n,m=(o=M.useContext(t))!==null&&o!==void 0?o:a,w=ur(m);return ct(()=>{w(l)}),M.useEffect(()=>{w(l)},[l]),M.useEffect(()=>(w(l),()=>{w(null)}),[]),c});return r.displayName="ModelDataProvider",{ModelDataAtomProvider:n=>{let{children:o,overrideAtom:l}=n;return D.jsx(t.Provider,{value:l??a,children:o})},ModelDataProvider:r,useModelDataSelector:(n,o)=>{var l;let c=(l=M.useContext(t))!==null&&l!==void 0?l:a,m=M.useCallback(w=>w?n(w):null,o||lt);return Ze(qr(c,m))},useSetModelData:()=>ur((e=M.useContext(t))!==null&&e!==void 0?e:a),useGetModelData:()=>{var n;let o=(n=M.useContext(t))!==null&&n!==void 0?n:a,l=tr();return()=>l.get(o)},useModelData:()=>{var n;return Ze((n=M.useContext(t))!==null&&n!==void 0?n:a)},setGlobalModelData:n=>{let o=er();o.set(a,Oe(o.get(a),n))},getGlobalModelData:()=>er().get(a),ModelDataAtomContext:t}},cr=er();cr.get,cr.set;var ft={},$r={exports:{}};(function(e){function t(a){return a&&a.__esModule?a:{default:a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})($r);var Pe=$r.exports,Gr={exports:{}};(function(e){function t(a){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Gr);var be=Gr.exports,_e={exports:{}},fr;function pt(){return fr||(fr=1,function(e){var t=be.default;function a(){e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var r,n={},o=Object.prototype,l=o.hasOwnProperty,c=Object.defineProperty||function(g,u,d){g[u]=d.value},m=typeof Symbol=="function"?Symbol:{},w=m.iterator||"@@iterator",v=m.asyncIterator||"@@asyncIterator",h=m.toStringTag||"@@toStringTag";function p(g,u,d){return Object.defineProperty(g,u,{value:d,enumerable:!0,configurable:!0,writable:!0}),g[u]}try{p({},"")}catch{p=function(d,R,j){return d[R]=j}}function A(g,u,d,R){var j=u&&u.prototype instanceof P?u:P,_=Object.create(j.prototype),f=new V(R||[]);return c(_,"_invoke",{value:z(g,d,f)}),_}function T(g,u,d){try{return{type:"normal",arg:g.call(u,d)}}catch(R){return{type:"throw",arg:R}}}n.wrap=A;var G="suspendedStart",$="suspendedYield",O="executing",s="completed",i={};function P(){}function S(){}function b(){}var B={};p(B,w,function(){return this});var C=Object.getPrototypeOf,q=C&&C(C(de([])));q&&q!==o&&l.call(q,w)&&(B=q);var I=b.prototype=P.prototype=Object.create(B);function Y(g){["next","throw","return"].forEach(function(u){p(g,u,function(d){return this._invoke(u,d)})})}function Q(g,u){function d(j,_,f,E){var x=T(g[j],g,_);if(x.type!=="throw"){var k=x.arg,L=k.value;return L&&t(L)=="object"&&l.call(L,"__await")?u.resolve(L.__await).then(function(N){d("next",N,f,E)},function(N){d("throw",N,f,E)}):u.resolve(L).then(function(N){k.value=N,f(k)},function(N){return d("throw",N,f,E)})}E(x.arg)}var R;c(this,"_invoke",{value:function(_,f){function E(){return new u(function(x,k){d(_,f,x,k)})}return R=R?R.then(E,E):E()}})}function z(g,u,d){var R=G;return function(j,_){if(R===O)throw Error("Generator is already running");if(R===s){if(j==="throw")throw _;return{value:r,done:!0}}for(d.method=j,d.arg=_;;){var f=d.delegate;if(f){var E=K(f,d);if(E){if(E===i)continue;return E}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(R===G)throw R=s,d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);R=O;var x=T(g,u,d);if(x.type==="normal"){if(R=d.done?s:$,x.arg===i)continue;return{value:x.arg,done:d.done}}x.type==="throw"&&(R=s,d.method="throw",d.arg=x.arg)}}}function K(g,u){var d=u.method,R=g.iterator[d];if(R===r)return u.delegate=null,d==="throw"&&g.iterator.return&&(u.method="return",u.arg=r,K(g,u),u.method==="throw")||d!=="return"&&(u.method="throw",u.arg=new TypeError("The iterator does not provide a '"+d+"' method")),i;var j=T(R,g.iterator,u.arg);if(j.type==="throw")return u.method="throw",u.arg=j.arg,u.delegate=null,i;var _=j.arg;return _?_.done?(u[g.resultName]=_.value,u.next=g.nextLoc,u.method!=="return"&&(u.method="next",u.arg=r),u.delegate=null,i):_:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,i)}function ue(g){var u={tryLoc:g[0]};1 in g&&(u.catchLoc=g[1]),2 in g&&(u.finallyLoc=g[2],u.afterLoc=g[3]),this.tryEntries.push(u)}function te(g){var u=g.completion||{};u.type="normal",delete u.arg,g.completion=u}function V(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(ue,this),this.reset(!0)}function de(g){if(g||g===""){var u=g[w];if(u)return u.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var d=-1,R=function j(){for(;++d<g.length;)if(l.call(g,d))return j.value=g[d],j.done=!1,j;return j.value=r,j.done=!0,j};return R.next=R}}throw new TypeError(t(g)+" is not iterable")}return S.prototype=b,c(I,"constructor",{value:b,configurable:!0}),c(b,"constructor",{value:S,configurable:!0}),S.displayName=p(b,h,"GeneratorFunction"),n.isGeneratorFunction=function(g){var u=typeof g=="function"&&g.constructor;return!!u&&(u===S||(u.displayName||u.name)==="GeneratorFunction")},n.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,b):(g.__proto__=b,p(g,h,"GeneratorFunction")),g.prototype=Object.create(I),g},n.awrap=function(g){return{__await:g}},Y(Q.prototype),p(Q.prototype,v,function(){return this}),n.AsyncIterator=Q,n.async=function(g,u,d,R,j){j===void 0&&(j=Promise);var _=new Q(A(g,u,d,R),j);return n.isGeneratorFunction(u)?_:_.next().then(function(f){return f.done?f.value:_.next()})},Y(I),p(I,h,"Generator"),p(I,w,function(){return this}),p(I,"toString",function(){return"[object Generator]"}),n.keys=function(g){var u=Object(g),d=[];for(var R in u)d.push(R);return d.reverse(),function j(){for(;d.length;){var _=d.pop();if(_ in u)return j.value=_,j.done=!1,j}return j.done=!0,j}},n.values=de,V.prototype={constructor:V,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(te),!u)for(var d in this)d.charAt(0)==="t"&&l.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=r)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var d=this;function R(k,L){return f.type="throw",f.arg=u,d.next=k,L&&(d.method="next",d.arg=r),!!L}for(var j=this.tryEntries.length-1;j>=0;--j){var _=this.tryEntries[j],f=_.completion;if(_.tryLoc==="root")return R("end");if(_.tryLoc<=this.prev){var E=l.call(_,"catchLoc"),x=l.call(_,"finallyLoc");if(E&&x){if(this.prev<_.catchLoc)return R(_.catchLoc,!0);if(this.prev<_.finallyLoc)return R(_.finallyLoc)}else if(E){if(this.prev<_.catchLoc)return R(_.catchLoc,!0)}else{if(!x)throw Error("try statement without catch or finally");if(this.prev<_.finallyLoc)return R(_.finallyLoc)}}}},abrupt:function(u,d){for(var R=this.tryEntries.length-1;R>=0;--R){var j=this.tryEntries[R];if(j.tryLoc<=this.prev&&l.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var _=j;break}}_&&(u==="break"||u==="continue")&&_.tryLoc<=d&&d<=_.finallyLoc&&(_=null);var f=_?_.completion:{};return f.type=u,f.arg=d,_?(this.method="next",this.next=_.finallyLoc,i):this.complete(f)},complete:function(u,d){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&d&&(this.next=d),i},finish:function(u){for(var d=this.tryEntries.length-1;d>=0;--d){var R=this.tryEntries[d];if(R.finallyLoc===u)return this.complete(R.completion,R.afterLoc),te(R),i}},catch:function(u){for(var d=this.tryEntries.length-1;d>=0;--d){var R=this.tryEntries[d];if(R.tryLoc===u){var j=R.completion;if(j.type==="throw"){var _=j.arg;te(R)}return _}}throw Error("illegal catch attempt")},delegateYield:function(u,d,R){return this.delegate={iterator:de(u),resultName:d,nextLoc:R},this.method==="next"&&(this.arg=r),i}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(_e)),_e.exports}var Ce,pr;function nr(){if(pr)return Ce;pr=1;var e=pt()();Ce=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return Ce}var je={exports:{}},Me={exports:{}},Ae={exports:{}},dr;function dt(){return dr||(dr=1,function(e){var t=be.default;function a(r,n){if(t(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var l=o.call(r,n||"default");if(t(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ae)),Ae.exports}var vr;function Br(){return vr||(vr=1,function(e){var t=be.default,a=dt();function r(n){var o=a(n,"string");return t(o)=="symbol"?o:o+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Me)),Me.exports}var hr;function Se(){return hr||(hr=1,function(e){var t=Br();function a(r,n,o){return n=t(n),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(je)),je.exports}var ke={exports:{}},gr;function ar(){return gr||(gr=1,function(e){function t(r,n,o,l,c,m,w){try{var v=r[m](w),h=v.value}catch(p){o(p);return}v.done?n(h):Promise.resolve(h).then(l,c)}function a(r){return function(){var n=this,o=arguments;return new Promise(function(l,c){var m=r.apply(n,o);function w(h){t(m,l,c,w,v,"next",h)}function v(h){t(m,l,c,w,v,"throw",h)}w(void 0)})}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ke)),ke.exports}var Ne={exports:{}},Le={exports:{}},yr;function vt(){return yr||(yr=1,function(e){function t(a){if(Array.isArray(a))return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Le)),Le.exports}var Te={exports:{}},br;function ht(){return br||(br=1,function(e){function t(a,r){var n=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n!=null){var o,l,c,m,w=[],v=!0,h=!1;try{if(c=(n=n.call(a)).next,r===0){if(Object(n)!==n)return;v=!1}else for(;!(v=(o=c.call(n)).done)&&(w.push(o.value),w.length!==r);v=!0);}catch(p){h=!0,l=p}finally{try{if(!v&&n.return!=null&&(m=n.return(),Object(m)!==m))return}finally{if(h)throw l}}return w}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Te.exports}var Ie={exports:{}},Ue={exports:{}},mr;function gt(){return mr||(mr=1,function(e){function t(a,r){(r==null||r>a.length)&&(r=a.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=a[n];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ue)),Ue.exports}var wr;function yt(){return wr||(wr=1,function(e){var t=gt();function a(r,n){if(r){if(typeof r=="string")return t(r,n);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(r,n)}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ie)),Ie.exports}var De={exports:{}},xr;function bt(){return xr||(xr=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(De)),De.exports}var Er;function mt(){return Er||(Er=1,function(e){var t=vt(),a=ht(),r=yt(),n=bt();function o(l,c){return t(l)||a(l,c)||r(l,c)||n()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(Ne)),Ne.exports}var fe={},F={},qe={exports:{}},Or;function wt(){return Or||(Or=1,function(e){function t(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(qe)),qe.exports}var Fe={exports:{}},Pr;function xt(){return Pr||(Pr=1,function(e){var t=Br();function a(n,o){for(var l=0;l<o.length;l++){var c=o[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,t(c.key),c)}}function r(n,o,l){return o&&a(n.prototype,o),l&&a(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Fe)),Fe.exports}var $e={exports:{}},Ge={exports:{}},Sr;function Et(){return Sr||(Sr=1,function(e){function t(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ge)),Ge.exports}var Rr;function Ot(){return Rr||(Rr=1,function(e){var t=be.default,a=Et();function r(n,o){if(o&&(t(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}($e)),$e.exports}var Be={exports:{}},_r;function Hr(){return _r||(_r=1,function(e){function t(a){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Be)),Be.exports}var He={exports:{}},ze={exports:{}},Cr;function or(){return Cr||(Cr=1,function(e){function t(a,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},e.exports.__esModule=!0,e.exports.default=e.exports,t(a,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ze)),ze.exports}var jr;function Pt(){return jr||(jr=1,function(e){var t=or();function a(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&t(r,n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(He)),He.exports}var We={exports:{}},Ke={exports:{}},Mr;function St(){return Mr||(Mr=1,function(e){function t(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ke)),Ke.exports}var Ve={exports:{}},Xe={exports:{}},Ar;function Rt(){return Ar||(Ar=1,function(e){function t(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!a},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Xe)),Xe.exports}var kr;function _t(){return kr||(kr=1,function(e){var t=or(),a=Rt();function r(n,o,l){if(a())return Reflect.construct.apply(null,arguments);var c=[null];c.push.apply(c,o);var m=new(n.bind.apply(n,c));return l&&t(m,l.prototype),m}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ve)),Ve.exports}var Nr;function Ct(){return Nr||(Nr=1,function(e){var t=Hr(),a=or(),r=St(),n=_t();function o(l){var c=typeof Map=="function"?new Map:void 0;return e.exports=o=function(w){if(w===null||!r(w))return w;if(typeof w!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(w))return c.get(w);c.set(w,v)}function v(){return n(w,arguments,t(this).constructor)}return v.prototype=Object.create(w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),a(v,w)},e.exports.__esModule=!0,e.exports.default=e.exports,o(l)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(We)),We.exports}var Lr;function jt(){if(Lr)return F;Lr=1;var e=Pe;Object.defineProperty(F,"__esModule",{value:!0}),F.UnsupportedStrategy=F.UnknownError=F.OAuthCallbackError=F.MissingSecret=F.MissingAuthorize=F.MissingAdapterMethods=F.MissingAdapter=F.MissingAPIRoute=F.InvalidCallbackUrl=F.AccountNotLinkedError=void 0,F.adapterErrorHandler=$,F.capitalize=T,F.eventsErrorHandler=G,F.upperSnake=A;var t=e(nr()),a=e(ar()),r=e(Se()),n=e(wt()),o=e(xt()),l=e(Ot()),c=e(Hr()),m=e(Pt()),w=e(Ct());function v(O,s,i){return s=(0,c.default)(s),(0,l.default)(O,h()?Reflect.construct(s,i||[],(0,c.default)(O).constructor):s.apply(O,i))}function h(){try{var O=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h=function(){return!!O})()}var p=F.UnknownError=function(O){function s(i){var P,S;return(0,n.default)(this,s),S=v(this,s,[(P=i?.message)!==null&&P!==void 0?P:i]),S.name="UnknownError",S.code=i.code,i instanceof Error&&(S.stack=i.stack),S}return(0,m.default)(s,O),(0,o.default)(s,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,w.default)(Error));F.OAuthCallbackError=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","OAuthCallbackError"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.AccountNotLinkedError=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","AccountNotLinkedError"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.MissingAPIRoute=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","MissingAPIRouteError"),(0,r.default)(i,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.MissingSecret=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","MissingSecretError"),(0,r.default)(i,"code","NO_SECRET"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.MissingAuthorize=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","MissingAuthorizeError"),(0,r.default)(i,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.MissingAdapter=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","MissingAdapterError"),(0,r.default)(i,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.MissingAdapterMethods=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","MissingAdapterMethodsError"),(0,r.default)(i,"code","MISSING_ADAPTER_METHODS_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.UnsupportedStrategy=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","UnsupportedStrategyError"),(0,r.default)(i,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p),F.InvalidCallbackUrl=function(O){function s(){var i;(0,n.default)(this,s);for(var P=arguments.length,S=new Array(P),b=0;b<P;b++)S[b]=arguments[b];return i=v(this,s,[].concat(S)),(0,r.default)(i,"name","InvalidCallbackUrl"),(0,r.default)(i,"code","INVALID_CALLBACK_URL_ERROR"),i}return(0,m.default)(s,O),(0,o.default)(s)}(p);function A(O){return O.replace(/([A-Z])/g,"_$1").toUpperCase()}function T(O){return"".concat(O[0].toUpperCase()).concat(O.slice(1))}function G(O,s){return Object.keys(O).reduce(function(i,P){return i[P]=(0,a.default)(t.default.mark(function S(){var b,B=arguments;return t.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.prev=0,b=O[P],q.next=4,b.apply(void 0,B);case 4:return q.abrupt("return",q.sent);case 7:q.prev=7,q.t0=q.catch(0),s.error("".concat(A(P),"_EVENT_ERROR"),q.t0);case 10:case"end":return q.stop()}},S,null,[[0,7]])})),i},{})}function $(O,s){if(O)return Object.keys(O).reduce(function(i,P){return i[P]=(0,a.default)(t.default.mark(function S(){var b,B,C,q,I,Y=arguments;return t.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:for(z.prev=0,b=Y.length,B=new Array(b),C=0;C<b;C++)B[C]=Y[C];return s.debug("adapter_".concat(P),{args:B}),q=O[P],z.next=6,q.apply(void 0,B);case 6:return z.abrupt("return",z.sent);case 9:throw z.prev=9,z.t0=z.catch(0),s.error("adapter_error_".concat(P),z.t0),I=new p(z.t0),I.name="".concat(T(P),"Error"),I;case 15:case"end":return z.stop()}},S,null,[[0,9]])})),i},{})}return F}var Tr;function Mt(){if(Tr)return fe;Tr=1;var e=Pe;Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0,fe.proxyLogger=w,fe.setLogger=m;var t=e(Se()),a=jt();function r(v,h){var p=Object.keys(v);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(v);h&&(A=A.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),p.push.apply(p,A)}return p}function n(v){for(var h=1;h<arguments.length;h++){var p=arguments[h]!=null?arguments[h]:{};h%2?r(Object(p),!0).forEach(function(A){(0,t.default)(v,A,p[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(p)):r(Object(p)).forEach(function(A){Object.defineProperty(v,A,Object.getOwnPropertyDescriptor(p,A))})}return v}function o(v){if(v instanceof Error&&!(v instanceof a.UnknownError))return{message:v.message,stack:v.stack,name:v.name};if(l(v)){var h;v.error=o(v.error),v.message=(h=v.message)!==null&&h!==void 0?h:v.error.message}return v}function l(v){return!!(v!=null&&v.error)}var c={error:function(h,p){p=o(p),console.error("[next-auth][error][".concat(h,"]"),`
https://next-auth.js.org/errors#`.concat(h.toLowerCase()),p.message,p)},warn:function(h){console.warn("[next-auth][warn][".concat(h,"]"),`
https://next-auth.js.org/warnings#`.concat(h.toLowerCase()))},debug:function(h,p){console.log("[next-auth][debug][".concat(h,"]"),p)}};function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;h||(c.debug=function(){}),v.error&&(c.error=v.error),v.warn&&(c.warn=v.warn),v.debug&&(c.debug=v.debug)}fe.default=c;function w(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c,h=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return v;var p={},A=function($){p[$]=function(O,s){c[$](O,s),$==="error"&&(s=o(s)),s.client=!0;var i="".concat(h,"/_log"),P=new URLSearchParams(n({level:$,code:O},s));return navigator.sendBeacon?navigator.sendBeacon(i,P):fetch(i,{method:"POST",body:P,keepalive:!0})}};for(var T in v)A(T);return p}catch{return c}}return fe}var we={},Ir;function At(){if(Ir)return we;Ir=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=e;function e(t){var a;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const n=new URL((a=t)!==null&&a!==void 0?a:r),o=(n.pathname==="/"?r.pathname:n.pathname).replace(/\/$/,""),l=`${n.origin}${o}`;return{origin:n.origin,host:n.host,path:o,base:l,toString:()=>l}}return we}var pe={},Ur;function kt(){if(Ur)return pe;Ur=1;var e=Pe;Object.defineProperty(pe,"__esModule",{value:!0}),pe.BroadcastChannel=v,pe.apiBaseUrl=m,pe.fetchData=l,pe.now=w;var t=e(nr()),a=e(Se()),r=e(ar());function n(h,p){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(h);p&&(T=T.filter(function(G){return Object.getOwnPropertyDescriptor(h,G).enumerable})),A.push.apply(A,T)}return A}function o(h){for(var p=1;p<arguments.length;p++){var A=arguments[p]!=null?arguments[p]:{};p%2?n(Object(A),!0).forEach(function(T){(0,a.default)(h,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):n(Object(A)).forEach(function(T){Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(A,T))})}return h}function l(h,p,A){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function h(p,A,T){var G,$,O,s,i,P,S,b,B,C=arguments;return t.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return G=C.length>3&&C[3]!==void 0?C[3]:{},$=G.ctx,O=G.req,s=O===void 0?$?.req:O,i="".concat(m(A),"/").concat(p),I.prev=2,S={headers:o({"Content-Type":"application/json"},s!=null&&(P=s.headers)!==null&&P!==void 0&&P.cookie?{cookie:s.headers.cookie}:{})},s!=null&&s.body&&(S.body=JSON.stringify(s.body),S.method="POST"),S.credentials="include",I.next=7,fetch(i,S);case 7:return b=I.sent,I.next=10,b.json();case 10:if(B=I.sent,b.ok){I.next=13;break}throw B;case 13:return I.abrupt("return",Object.keys(B).length>0?B:null);case 16:return I.prev=16,I.t0=I.catch(2),console.error("CLIENT_FETCH_ERROR",{error:I.t0,url:i}),I.abrupt("return",null);case 20:case"end":return I.stop()}},h,null,[[2,16]])})),c.apply(this,arguments)}function m(h){return typeof window>"u"?"".concat(h.baseUrlServer).concat(h.basePathServer):h.basePath}function w(){return Math.floor(Date.now()/1e3)}function v(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(A){var T=function($){var O;if($.key===h){var s=JSON.parse((O=$.newValue)!==null&&O!==void 0?O:"{}");s?.event!=="session"||!(s!=null&&s.data)||A(s)}};return window.addEventListener("storage",T),function(){return window.removeEventListener("storage",T)}},post:function(A){if(!(typeof window>"u"))try{localStorage.setItem(h,JSON.stringify(o(o({},A),{},{timestamp:w()})))}catch{}}}}return pe}var Je={},Dr;function Nt(){return Dr||(Dr=1,Object.defineProperty(Je,"__esModule",{value:!0})),Je}(function(e){var t={NEXT_PUBLIC_API_URL:"https://innei.ren/api/v2",NEXT_PUBLIC_GATEWAY_URL:"https://api.innei.ren",TMDB_API_KEY:"",GH_TOKEN:""},a=Pe,r=be;Object.defineProperty(e,"__esModule",{value:!0});var n={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=_,e.getCsrfToken=te,e.getProviders=de,e.getSession=K,e.signIn=u,e.signOut=R,e.useSession=z;var o=a(nr()),l=a(Se()),c=a(ar()),m=a(mt()),w=S(M),v=S(Mt()),h=a(At()),p=kt(),A=D,T=Nt();Object.keys(T).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(n,f)||f in e&&e[f]===T[f]||Object.defineProperty(e,f,{enumerable:!0,get:function(){return T[f]}})});var G,$,O,s,i;function P(f){if(typeof WeakMap!="function")return null;var E=new WeakMap,x=new WeakMap;return(P=function(L){return L?x:E})(f)}function S(f,E){if(f&&f.__esModule)return f;if(f===null||r(f)!="object"&&typeof f!="function")return{default:f};var x=P(E);if(x&&x.has(f))return x.get(f);var k={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in f)if(N!=="default"&&{}.hasOwnProperty.call(f,N)){var W=L?Object.getOwnPropertyDescriptor(f,N):null;W&&(W.get||W.set)?Object.defineProperty(k,N,W):k[N]=f[N]}return k.default=f,x&&x.set(f,k),k}function b(f,E){var x=Object.keys(f);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(f);E&&(k=k.filter(function(L){return Object.getOwnPropertyDescriptor(f,L).enumerable})),x.push.apply(x,k)}return x}function B(f){for(var E=1;E<arguments.length;E++){var x=arguments[E]!=null?arguments[E]:{};E%2?b(Object(x),!0).forEach(function(k){(0,l.default)(f,k,x[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(x)):b(Object(x)).forEach(function(k){Object.defineProperty(f,k,Object.getOwnPropertyDescriptor(x,k))})}return f}var C={baseUrl:(0,h.default)((G=t.NEXTAUTH_URL)!==null&&G!==void 0?G:t.VERCEL_URL).origin,basePath:(0,h.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,h.default)(($=(O=t.NEXTAUTH_URL_INTERNAL)!==null&&O!==void 0?O:t.NEXTAUTH_URL)!==null&&$!==void 0?$:t.VERCEL_URL).origin,basePathServer:(0,h.default)((s=t.NEXTAUTH_URL_INTERNAL)!==null&&s!==void 0?s:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},q=(0,p.BroadcastChannel)(),I=(0,v.proxyLogger)(v.default,C.basePath);function Y(){var f=w.useState(typeof navigator<"u"?navigator.onLine:!1),E=(0,m.default)(f,2),x=E[0],k=E[1],L=function(){return k(!0)},N=function(){return k(!1)};return w.useEffect(function(){return window.addEventListener("online",L),window.addEventListener("offline",N),function(){window.removeEventListener("online",L),window.removeEventListener("offline",N)}},[]),x}var Q=e.SessionContext=(i=w.createContext)===null||i===void 0?void 0:i.call(w,void 0);function z(f){if(!Q)throw new Error("React Context is unavailable in Server Components");var E=w.useContext(Q),x=f??{},k=x.required,L=x.onUnauthenticated,N=k&&E.status==="unauthenticated";return w.useEffect(function(){if(N){var W="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));L?L():window.location.href=W}},[N,L]),N?{data:E.data,update:E.update,status:"loading"}:E}function K(f){return ue.apply(this,arguments)}function ue(){return ue=(0,c.default)(o.default.mark(function f(E){var x,k;return o.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,p.fetchData)("session",C,I,E);case 2:return k=N.sent,(!((x=E?.broadcast)!==null&&x!==void 0)||x)&&q.post({event:"session",data:{trigger:"getSession"}}),N.abrupt("return",k);case 5:case"end":return N.stop()}},f)})),ue.apply(this,arguments)}function te(f){return V.apply(this,arguments)}function V(){return V=(0,c.default)(o.default.mark(function f(E){var x;return o.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,p.fetchData)("csrf",C,I,E);case 2:return x=L.sent,L.abrupt("return",x?.csrfToken);case 4:case"end":return L.stop()}},f)})),V.apply(this,arguments)}function de(){return g.apply(this,arguments)}function g(){return g=(0,c.default)(o.default.mark(function f(){return o.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,p.fetchData)("providers",C,I);case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},f)})),g.apply(this,arguments)}function u(f,E,x){return d.apply(this,arguments)}function d(){return d=(0,c.default)(o.default.mark(function f(E,x,k){var L,N,W,se,ne,Z,re,ae,le,U,me,ge,ce,X,oe,ee,J;return o.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return L=x??{},N=L.callbackUrl,W=N===void 0?window.location.href:N,se=L.redirect,ne=se===void 0?!0:se,Z=(0,p.apiBaseUrl)(C),y.next=4,de();case 4:if(re=y.sent,re){y.next=8;break}return window.location.href="".concat(Z,"/error"),y.abrupt("return");case 8:if(!(!E||!(E in re))){y.next=11;break}return window.location.href="".concat(Z,"/signin?").concat(new URLSearchParams({callbackUrl:W})),y.abrupt("return");case 11:return ae=re[E].type==="credentials",le=re[E].type==="email",U=ae||le,me="".concat(Z,"/").concat(ae?"callback":"signin","/").concat(E),ge="".concat(me).concat(k?"?".concat(new URLSearchParams(k)):""),y.t0=fetch,y.t1=ge,y.t2={"Content-Type":"application/x-www-form-urlencoded"},y.t3=URLSearchParams,y.t4=B,y.t5=B({},x),y.t6={},y.next=25,te();case 25:return y.t7=y.sent,y.t8=W,y.t9={csrfToken:y.t7,callbackUrl:y.t8,json:!0},y.t10=(0,y.t4)(y.t5,y.t6,y.t9),y.t11=new y.t3(y.t10),y.t12={method:"post",headers:y.t2,body:y.t11},y.next=33,(0,y.t0)(y.t1,y.t12);case 33:return ce=y.sent,y.next=36,ce.json();case 36:if(X=y.sent,!(ne||!U)){y.next=42;break}return ee=(oe=X.url)!==null&&oe!==void 0?oe:W,window.location.href=ee,ee.includes("#")&&window.location.reload(),y.abrupt("return");case 42:if(J=new URL(X.url).searchParams.get("error"),!ce.ok){y.next=46;break}return y.next=46,C._getSession({event:"storage"});case 46:return y.abrupt("return",{error:J,status:ce.status,ok:ce.ok,url:J?null:X.url});case 47:case"end":return y.stop()}},f)})),d.apply(this,arguments)}function R(f){return j.apply(this,arguments)}function j(){return j=(0,c.default)(o.default.mark(function f(E){var x,k,L,N,W,se,ne,Z,re,ae;return o.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return k=E??{},L=k.callbackUrl,N=L===void 0?window.location.href:L,W=(0,p.apiBaseUrl)(C),U.t0={"Content-Type":"application/x-www-form-urlencoded"},U.t1=URLSearchParams,U.next=6,te();case 6:return U.t2=U.sent,U.t3=N,U.t4={csrfToken:U.t2,callbackUrl:U.t3,json:!0},U.t5=new U.t1(U.t4),se={method:"post",headers:U.t0,body:U.t5},U.next=13,fetch("".concat(W,"/signout"),se);case 13:return ne=U.sent,U.next=16,ne.json();case 16:if(Z=U.sent,q.post({event:"session",data:{trigger:"signout"}}),!(!((x=E?.redirect)!==null&&x!==void 0)||x)){U.next=23;break}return ae=(re=Z.url)!==null&&re!==void 0?re:N,window.location.href=ae,ae.includes("#")&&window.location.reload(),U.abrupt("return");case 23:return U.next=25,C._getSession({event:"storage"});case 25:return U.abrupt("return",Z);case 26:case"end":return U.stop()}},f)})),j.apply(this,arguments)}function _(f){if(!Q)throw new Error("React Context is unavailable in Server Components");var E=f.children,x=f.basePath,k=f.refetchInterval,L=f.refetchWhenOffline;x&&(C.basePath=x);var N=f.session!==void 0;C._lastSync=N?(0,p.now)():0;var W=w.useState(function(){return N&&(C._session=f.session),f.session}),se=(0,m.default)(W,2),ne=se[0],Z=se[1],re=w.useState(!N),ae=(0,m.default)(re,2),le=ae[0],U=ae[1];w.useEffect(function(){return C._getSession=(0,c.default)(o.default.mark(function X(){var oe,ee,J,ye=arguments;return o.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(oe=ye.length>0&&ye[0]!==void 0?ye[0]:{},ee=oe.event,H.prev=1,J=ee==="storage",!(J||C._session===void 0)){H.next=10;break}return C._lastSync=(0,p.now)(),H.next=7,K({broadcast:!J});case 7:return C._session=H.sent,Z(C._session),H.abrupt("return");case 10:if(!(!ee||C._session===null||(0,p.now)()<C._lastSync)){H.next=12;break}return H.abrupt("return");case 12:return C._lastSync=(0,p.now)(),H.next=15,K();case 15:C._session=H.sent,Z(C._session),H.next=22;break;case 19:H.prev=19,H.t0=H.catch(1),I.error("CLIENT_SESSION_ERROR",H.t0);case 22:return H.prev=22,U(!1),H.finish(22);case 25:case"end":return H.stop()}},X,null,[[1,19,22,25]])})),C._getSession(),function(){C._lastSync=0,C._session=void 0,C._getSession=function(){}}},[]),w.useEffect(function(){var X=q.receive(function(){return C._getSession({event:"storage"})});return function(){return X()}},[]),w.useEffect(function(){var X=f.refetchOnWindowFocus,oe=X===void 0?!0:X,ee=function(){oe&&document.visibilityState==="visible"&&C._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",ee,!1),function(){return document.removeEventListener("visibilitychange",ee,!1)}},[f.refetchOnWindowFocus]);var me=Y(),ge=L!==!1||me;w.useEffect(function(){if(k&&ge){var X=setInterval(function(){C._session&&C._getSession({event:"poll"})},k*1e3);return function(){return clearInterval(X)}}},[k,ge]);var ce=w.useMemo(function(){return{data:ne,status:le?"loading":ne?"authenticated":"unauthenticated",update:function(oe){return(0,c.default)(o.default.mark(function ee(){var J;return o.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(le||!ne)){y.next=2;break}return y.abrupt("return");case 2:return U(!0),y.t0=p.fetchData,y.t1=C,y.t2=I,y.next=8,te();case 8:return y.t3=y.sent,y.t4=oe,y.t5={csrfToken:y.t3,data:y.t4},y.t6={body:y.t5},y.t7={req:y.t6},y.next=15,(0,y.t0)("session",y.t1,y.t2,y.t7);case 15:return J=y.sent,U(!1),J&&(Z(J),q.post({event:"session",data:{trigger:"getSession"}})),y.abrupt("return",J);case 19:case"end":return y.stop()}},ee)}))()}}},[ne,le]);return(0,A.jsx)(Q.Provider,{value:ce,children:E})}})(ft);rr({});const zr=M.createContext(null),Wr=M.createContext(null),Kr=()=>M.useContext(zr),Lt=()=>M.useContext(Wr),Tt=M.forwardRef((e,t)=>{const{showErrorMessage:a=!0,...r}=e,n=ir(()=>rr({})),o=ir(()=>({showErrorMessage:a,fields:n,getField:l=>he.get(n)[l],getCurrentValues:()=>Object.fromEntries(Object.entries(he.get(n)).map(([l,c])=>{const m=c.getEl()?.value;return[l,c.transform?c.transform?.(m):m]})),addField:(l,c)=>{he.set(n,m=>({...m,[l]:c}))},removeField:l=>{he.set(n,c=>{const m={...c};return delete m[l],m})}}));return M.useImperativeHandle(t,()=>o,[o]),D.jsx(zr.Provider,{value:o,children:D.jsx(Wr.Provider,{value:M.useMemo(()=>({showErrorMessage:a}),[a]),children:D.jsx(It,{...r})})})});Tt.displayName="Form";const It=e=>{const{onSubmit:t,...a}=e,r=Kr().fields,n=M.useCallback(async o=>{o.preventDefault();const l=he.get(r);for await(const[c,m]of Object.entries(l)){const w=m.getEl();if(!w)continue;const{value:v}=w,{rules:h}=m;for(const[p,A]of h.entries())try{if(!await A.validator(v)){console.error(`Form validation failed, at field \`${c}\`, got value \`${v}\``),w.focus(),A.message&&he.set(r,G=>Oe(G,$=>{$[c].rules[p].status="error"}));return}}catch(T){console.error("validate function throw error",T);return}}t?.(o)},[t]);return D.jsx("form",{onSubmit:n,...a,children:e.children})};var Ut="Label",Vr=M.forwardRef((e,t)=>D.jsx(ot.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Vr.displayName=Ut;var Xr=Vr;const Dt=M.createContext({}),qt=()=>M.useContext(Dt),sr=M.forwardRef(({className:e,...t},a)=>{const r=qt();return D.jsx(Xr,{ref:a,className:ie("text-foreground-600 text-[1em] font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e,r.className),...t})});sr.displayName=Xr.displayName;const Ft=({errorMessage:e,id:t})=>D.jsx("div",{className:"mt-2",children:D.jsx(sr,{className:"text-xs font-medium text-error",htmlFor:t,children:e})}),$t=M.createContext({}),Gt=()=>M.useContext($t),Bt=ve.forwardRef((e,t)=>{const{className:a,type:r,label:n,isLoading:o,errorMessage:l,isInvalid:c,endContent:m,labelPlacement:w,inputClassName:v,bindValue:h,...p}=e,A=M.useId(),T=Gt(),{value:G,onChange:$,onBlur:O,onFocus:s,labelClassName:i,...P}=p,[S,b]=ve.useState(!1),B=ve.useCallback(()=>{b(!0)},[]),C=ve.useCallback(()=>{b(!1)},[]),[q,I]=ve.useState(p.value);M.useEffect(()=>{I(p.value)},[p.value]);const[Y,Q]=ve.useState(!1),z=et({},T,e),{labelPlacement:K="top"}=z,ue=ie(T.inputClassName,e.labelClassName),te=ie(T.inputClassName,e.inputClassName);return D.jsxs("div",{className:"flex w-full flex-col",children:[D.jsxs("div",{className:ie({"flex flex-col":K==="top","flex grow flex-row items-center":K==="left"},"peer relative",a),children:[n&&D.jsx(sr,{className:Ee({"mr-4":K==="left","mb-2 flex":K==="top"},K==="inside"&&{"absolute left-3 top-2 z-[1] select-none duration-200":!0,"text-primary":S,"bottom-2 top-2 flex items-center text-lg":!G&&!S},ue),htmlFor:A,children:n}),D.jsxs("div",{className:"relative grow",children:[D.jsx("input",{id:A,value:rt(h)?q:h,onChange:V=>{I(V.target.value),$?.(V)},onBlur:V=>{C(),O?.(V)},onFocus:V=>{B(),s?.(V)},type:r==="password"&&!Y?"password":"text",className:ie("flex h-10 w-full rounded-md border px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50","border-zinc-200 bg-white placeholder:text-slate-500 focus-visible:border-primary dark:border-neutral-800 dark:bg-zinc-900",K==="inside"&&"h-auto pb-2 pt-8",r==="password"&&["pr-6",!Y&&"font-mono"],o&&"pr-6",c&&"!border-red-400 !bg-red-600/50",te),ref:t,...P}),r==="password"&&!o&&D.jsx(nt,{className:Ye({placement:K}),onClick:()=>{Q(!Y)},children:D.jsx("i",{className:Ee("text-lg text-gray-500",Y?"i-mingcute-eye-line":"i-mingcute-eye-close-line")})}),!o&&m&&D.jsx("div",{className:Ye({placement:K}),children:m}),o&&D.jsx("div",{className:Ye({placement:K}),children:D.jsx("i",{className:"loading loading-spinner size-5 text-primary/80"})})]})]}),c&&l&&D.jsx(Ft,{id:A,errorMessage:l})]})}),Ye=at({base:"absolute right-2",variants:{placement:{inside:"bottom-2",left:"bottom-0 top-0 flex items-center",top:"bottom-0 top-0 flex items-center"}}});Bt.displayName="Input";const Jr=e=>{const{onKeyDown:t,onCompositionStart:a,onCompositionEnd:r}=e,n=M.useRef(!1),o=M.useCallback(m=>{n.current=!0,a?.(m)},[a]),l=M.useCallback(m=>{n.current=!1,r?.(m)},[r]),c=M.useCallback(m=>{if(n.current){m.stopPropagation();return}t?.(m)},[t]);return{onCompositionEnd:l,onCompositionStart:o,onKeyDown:c}},Yr=M.forwardRef(({className:e,...t},a)=>{const r=Jr(t);return D.jsx("input",{ref:a,className:ie("min-w-0 flex-auto appearance-none rounded-lg border ring-accent/20 duration-200 sm:text-sm lg:text-base","bg-base-100 px-3 py-[calc(theme(spacing.2)-1px)] placeholder:text-zinc-400 focus:outline-none focus:ring-2 dark:bg-zinc-700/[0.15]","border-border","focus:!border-accent/80 focus:!bg-accent/5 dark:text-zinc-200 dark:placeholder:text-zinc-500",t.type==="password"?"font-mono placeholder:font-sans":"font-sans",e),...t,...r})});Yr.displayName="Input";const xe={sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl",default:"rounded"},Ht=M.forwardRef((e,t)=>{const{className:a,wrapperClassName:r,children:n,rounded:o="xl",bordered:l=!0,onCmdEnter:c,onKeyDown:m,...w}=e,v=lr(0),h=lr(0),p=M.useCallback(({clientX:i,clientY:P,currentTarget:S})=>{const b=S.getBoundingClientRect();v.set(i-b.left),h.set(P-b.top)},[v,h]),A=M.useCallback(i=>{i.key==="Enter"&&(i.metaKey||i.ctrlKey)&&c?.(i),m?.(i)},[c,m]),T=st`radial-gradient(320px circle at ${v}px ${h}px, var(--spotlight-color) 0%, transparent 85%)`,G=Zr(),$=Jr(Object.assign({},e,{onKeyDown:A})),[O,s]=M.useState(!1);return D.jsxs("div",{className:ie("group relative h-full border ring-0 ring-accent/20 duration-200 [--spotlight-color:oklch(var(--a)_/_0.12)]",xe[o],"border-transparent",O&&"border-accent/80 bg-accent/5 ring-2","dark:text-zinc-200 dark:placeholder:text-zinc-500",r),onMouseMove:p,children:[!G&&D.jsx(it.div,{className:Ee("pointer-events-none absolute inset-0 z-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100",xe[o]),style:{background:T},"aria-hidden":"true"}),l&&D.jsx("div",{className:Ee("border-border pointer-events-none absolute inset-0 z-0 border",xe[o]),"aria-hidden":"true"}),D.jsx("textarea",{ref:t,className:ie("size-full resize-none bg-transparent","overflow-auto px-3 py-4","!outline-none","text-neutral-900/80 dark:text-slate-100/80",xe[o],a),...w,onFocus:i=>{s(!0),w.onFocus?.(i)},onBlur:i=>{s(!1),w.onBlur?.(i)},...$}),n]})});Ht.displayName="TextArea";const Re=()=>{const e=Kr();if(!e)throw new Error("FormInput must be used inside <FormContext />");return e},zt=e=>{const t=Re(),{fields:a}=t;return Ze(qr(a,M.useCallback(r=>{if(e)return r[e]?.rules.find(n=>n.status==="error")?.message},[e])))},Wt=({rules:e,transform:t,getEl:a,name:r})=>{const n=Re(),{addField:o,removeField:l}=n,c=ut(a);M.useEffect(()=>{if(e&&r)return o(r,{rules:e,getEl:c,transform:t}),()=>{l(r)}},[o,c,r,l,e,t])},Kt=e=>{const t=tr(),a=Re(),{fields:r}=a;return M.useCallback(()=>{t.set(r,n=>Oe(n,o=>{e&&o[e].rules.forEach(l=>{l.status==="error"&&(l.status="success")})}))},[r,t,e])},Vt=e=>{const t=tr(),a=Re(),{fields:r}=a;return M.useCallback(()=>{t.set(r,n=>Oe(n,o=>{if(!e)return;const l=o[e].getEl()?.value;l&&o[e].rules.some(c=>{if(!c.validator(l))return c.status="error",!0})}))},[r,t,e])},Xt=M.memo(({className:e,rules:t,onKeyDown:a,transform:r,name:n,...o})=>{const{showErrorMessage:l}=Lt(),c=M.useRef(null),m=zt(n);Wt({rules:t||[],transform:r,getEl:()=>c.current,name:n});const w=Kt(n),v=M.useCallback(p=>{a&&a(p),w()},[a,w]),h=Vt(n);return D.jsxs(D.Fragment,{children:[D.jsx(Yr,{name:n,ref:c,className:ie(!!m&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:v,onBlur:p=>{h(),o.onBlur?.(p)},...o}),l&&D.jsx(tt,{duration:.2,children:D.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:m})})]})});Xt.displayName="FormInput";var Jt=(e=>(e.Home="//",e.Posts="/posts",e.Post="/posts/",e.Notes="/notes",e.Note="/notes/",e.NoteTopics="/notes/topics",e.NoteTopic="/notes/topics/",e.Timelime="/timeline",e.Login="/login",e.Page="/",e.Categories="/categories",e.Category="/categories/",e.Projects="/projects",e.Project="/projects/",e.Says="/says",e.Friends="/friends",e.Thinking="/thinking",e.PageDeletd="/common/deleted",e))(Jt||{});function ln(e,t){let a=e;switch(e){case"/notes/":{a+=t.id,t.password&&(a+=`?password=${t.password}`);break}case"/posts/":{const r=t;a+=`${r.category}/${r.slug}`;break}case"/posts":{const r=t;a+=`?${new URLSearchParams(r).toString()}`;break}case"/timeline":{const r=t;a+=`?${new URLSearchParams(r).toString()}`;break}case"/notes/topics/":case"/categories/":case"/":{a+=t.slug;break}case"//":{a="/";break}case"/projects/":{a+=t.id;break}}return a}M.createContext(null);M.createContext({reset(e,t){}});const{ModelDataProvider:cn,ModelDataAtomProvider:fn,getGlobalModelData:pn,setGlobalModelData:dn,useModelDataSelector:vn,useSetModelData:hn}=Fr(),{ModelDataProvider:gn,ModelDataAtomProvider:yn,getGlobalModelData:bn,setGlobalModelData:mn,useModelDataSelector:wn}=Fr(),xn=e=>["comments",e],Qe=e=>`ws_event:${e}`;class Qr extends Event{constructor(t,a){super(Qe(t)),this.data=a}static on(t,a){const r=n=>{a(n.data)};return document.addEventListener(Qe(t),r),()=>{document.removeEventListener(Qe(t),r)}}static emit(t,a){document.dispatchEvent(new Qr(t,a))}}export{Tt as F,Yr as I,yn as M,Jt as R,Ht as T,Qr as W,Xt as a,ln as b,gn as c,vn as d,fn as e,cn as f,Lt as g,zt as h,Wt as i,Kt as j,Vt as k,pn as l,bn as m,mn as n,xn as o,Fr as p,ft as r,dn as s,wn as u};
